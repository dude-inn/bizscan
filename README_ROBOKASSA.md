# Robokassa Integration

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ `.env`:**
```bash
# Robokassa settings
ROBOKASSA_MERCHANT_LOGIN=your_merchant_login
ROBOKASSA_PASSWORD1=your_password1
ROBOKASSA_PASSWORD2=your_password2
ROBOKASSA_IS_TEST=True
ROBOKASSA_BASE_URL=https://auth.robokassa.ru/Merchant/Index.aspx
RESULT_URL=https://your.domain/robokassa/result
SUCCESS_URL=https://your.domain/robokassa/success
FAIL_URL=https://your.domain/robokassa/fail
ROBOKASSA_REFUND_URL=https://services.robokassa.ru/PartnerRegisterService/api/Operation/RefundOperation
ROBOKASSA_PARTNER_ID=your_partner_id
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ FastAPI —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∫–æ–ª–±–µ–∫–æ–≤:**
```bash
python run_api.py
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
```bash
python app.py
```

## –§—É–Ω–∫—Ü–∏–∏

### –û–ø–ª–∞—Ç–∞ –æ—Ç—á—ë—Ç–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∏ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç"
- –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–∫–∞–∑ –≤ –ë–î
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É Robokassa
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Robokassa Refund API
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–æ–º–∞–Ω–¥–∞ `/stats` –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π: –ø–æ–∏—Å–∫–∏, –æ—Ç—á—ë—Ç—ã, –∫–æ–Ω–≤–µ—Ä—Å–∏—è
- –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ç–æ–ø-—á–∞—Å—ã

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- FSM –∫–µ—à –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç—á—ë—Ç–∞
- –§–ª–∞–≥ "building" –ø—Ä–æ—Ç–∏–≤ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–µ—Ç—Ä–∞–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–∞—Ö

## API Endpoints

- `POST/GET /robokassa/result` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `GET /robokassa/success` - —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
- `GET /robokassa/fail` - –Ω–µ—É–¥–∞—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ Robokassa
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤



